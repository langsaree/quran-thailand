(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,function(e,t,s){"use strict";s.d(t,"a",(function(){return o})),s.d(t,"c",(function(){return r})),s.d(t,"b",(function(){return a}));const n=[7,286,200,176,120,165,206,75,129,109,123,111,43,52,99,128,111,110,98,135,112,78,118,64,77,227,93,88,69,60,34,30,73,54,45,83,182,88,75,85,54,53,89,59,37,35,38,29,18,45,60,49,62,55,78,96,29,22,24,13,14,11,11,18,12,12,30,52,52,44,28,28,20,56,40,31,50,40,46,42,29,19,36,25,22,17,19,26,30,20,15,21,11,8,8,19,5,8,8,11,11,8,3,9,5,4,7,3,6,3,5,4,5,6],i=[0,7,293,493,669,789,954,1160,1235,1364,1473,1596,1707,1750,1802,1901,2029,2140,2250,2348,2483,2595,2673,2791,2855,2932,3159,3252,3340,3409,3469,3503,3533,3606,3660,3705,3788,3970,4058,4133,4218,4272,4325,4414,4473,4510,4545,4583,4612,4630,4675,4735,4784,4846,4901,4979,5075,5104,5126,5150,5163,5177,5188,5199,5217,5229,5241,5271,5323,5375,5419,5447,5475,5495,5551,5591,5622,5672,5712,5758,5800,5829,5848,5884,5909,5931,5948,5967,5993,6023,6043,6058,6079,6090,6098,6106,6125,6130,6138,6146,6157,6168,6176,6179,6188,6193,6197,6204,6207,6213,6216,6221,6225,6230];function a(e){let t,s,i;for(i=0;i<n.length;i+=1){if(e<=n[i]){t=i+1,s=e;break}e-=n[i]}return function(e,t){if(l(e,t))return`${e}:${t}`}(t,s)}function r(e){return e.split(":")[1]}function o(e){const t=e.split(":");return function(e,t){if(e=parseInt(e),t=parseInt(t),l(e,t))return i[e-1]+t}(parseInt(t[0]),parseInt(t[1]))}function l(e,t){return t>0&&n[e-1]&&t<=n[e-1]}},function(e,t,s){"use strict";s.r(t),function(e){var n=s(1),i=s(7),a=s(10),r=s(6);e.settings={};const o={v1:{mobile:20,desktop:30},v2:{mobile:16,desktop:30},indopak:{mobile:25,desktop:30},default:{mobile:16,desktop:30}},l={mobile:16,desktop:16},c="var(--gray)",d="#b1bec5";t.default=class extends n.b{connect(){document.body.setting=document.body.setting||this,this.store=new i.a,this.loadSettings(),this.device=new a.a,this.mobile=this.device.isMobile(),window.addEventListener("resize",()=>this.resizeHandler()),$("style.setting").remove(),this.styles=document.createElement("style"),this.styles.classList.add("setting"),document.head.appendChild(this.styles),this.bindReset(),this.bindTooltip(),this.bindFontSize(),this.updateFontSize()}hideSetting(){document.querySelector(".menus").classList.add("hidden"),document.querySelector(".menus__tab").classList.add("hidden")}resizeHandler(){this.mobile=this.device.isMobile(),this.updateFontSize()}loadSettings(){let e;try{e=JSON.parse(this.store.get("setting")||"{}")}catch{e={}}let t=this.defaultSetting();settings=Object.assign(t,e),0==settings.translations.length&&(settings.translations=t.translations),settings.repeatEnabled=!1,settings.repeatFrom=0,settings.repeatTo=0,settings.repeatAyah=0}bindTooltip(){$(`[data-value=${this.get("tooltip")}]`).attr("checked","checked"),$("[name=tooltip-display]").on("change",e=>{this.set("tooltip",$(e.target).data("value"))})}bindReset(){$("#reset-settings").on("click",e=>this.resetSetting(e))}bindFontSize(){$("[data-trigger=font-size]").on("click",e=>this.handleFontSize(e))}getTooltipType(){return this.get("tooltip")}saveSettings(){let e=JSON.stringify(settings);this.store.set("setting",e)}defaultSetting(){return{font:"v1",tooltip:"t",recitation:7,nightMode:null,readingMode:!1,translations:[131,20],repeatEnabled:!1,repeatCount:1,repeatFrom:null,repeatTo:null,repeatIteration:1,repeatType:"single",pauseBwAyah:0,repeatAyah:null,autoScroll:!0,autoShowWordTooltip:!1,arabicFontSize:o,translationFontSize:l}}updateFontSize(){let t=[],s=this.mobile?"mobile":"desktop",n=parseInt(this.translationFontSize()[s]),i=parseInt(this.wordFontSize()[s]);const a=Math.min(Math.max(i,15),150);t.push(`.verse .arabic, .w{font-size: ${a}px !important}`),t.push(`.translation {font-size: ${n}px !important}`),t.push(`#verses-reading .arabic .v1{word-spacing: ${.323*a}px !important}`),t.push(`#verses-reading .v1.pause {word-spacing: ${.423*a}px !important}`),t.push(`.translation__arabic .verse .arabic, .translation__arabic .w{font-size: ${1.5*a}px !important}`),e.styles=this.styles,this.styles.innerText=t.join(" ")}get(e){return settings[e]}set(e,t){settings[e]=t,this.saveSettings(),document.body.setting=this}handleFontSize(e){e.preventDefault();let t,s,n=this.mobile?"mobile":"desktop",i=document.body.setting||this;const a=e.target.dataset,r=+a.increment;"arabic"==a.target?(t=$(".verse .arabic"),s=this.wordFontSize()[n]):(t=$(".verse .translation"),s=this.translationFontSize()[n]);let h,u,p=parseInt(t.css("font-size")||s,10);if(p+=r,"arabic"==a.target){let e=i.get("arabicFontSize")||o;e[i.get("font")]?e[i.get("font")][n]=p:e.default[n]=p,i.set("arabicFontSize",e),h=document.getElementById("font-size-plus--arabic"),u=document.getElementById("font-size-minus--arabic")}else{let e=i.get("translationFontSize")||l;e[n]=p,i.set("translationFontSize",e),h=document.getElementById("font-size-plus--translation"),u=document.getElementById("font-size-minus--translation")}p<=15?(u.style.color=c,u.disabled=!0,u.ariaDisabled=!0):(u.style.color=d,u.disabled=!1,u.ariaDisabled=!1),p>=150?(h.style.color=c,h.disabled=!0,h.ariaDisabled=!0):(h.style.color=d,h.disabled=null,h.ariaDisabled=null),this.updateFontSize()}resetSetting(e){settings=this.defaultSetting(),this.saveSettings(),this.resetPage()}resetPage(){this.styles.innerText="",Object(r.a)().changeTranslations(this.defaultSetting().translations)}wordFontSize(){const e=(0,document.body.setting.get)("arabicFontSize")||o;return e[this.currentFont]||e.default}translationFontSize(){return(0,document.body.setting.get)("translationFontSize")||l}get currentFont(){let e=null;if(window.pageSettings&&(e=pageSettings.font),!e){e=(0,document.body.setting.get)("font")}return e}get selectedTranslations(){return window.pageSettings?pageSettings.translations:[]}}}.call(this,s(11))},,function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=()=>document.getElementById("reader").reader},function(e,t,s){"use strict";class n{getItem(e){let t=document.cookie.match(`(^|;)\\s*${e}\\s*=\\s*([^;]+)`);return t?t.pop():null}setItem(e,t){let s=new Date;s.setTime(s.getTime()+2592e7);let n="; expires="+s.toGMTString();document.cookie=e+"="+String(t)+n+"; path=/"}}t.a=class{constructor(e){this.storeKey=e?"quran-store":"quran-v1.4"}get(e){return this.getStore().getItem(this.transformKey(e))}set(e,t){return this.getStore().setItem(this.transformKey(e),t)}transformKey(e){return`${this.storeKey}-${e}`}getStore(){return"object"==typeof localStorage?localStorage:new n}}},function(e,t,s){"use strict";s.r(t);var n=s(1),i=s(3);t.default=class extends n.b{initialize(){this.pageLoader=null,this.element.reader=this,this.currentVerse={el:null,number:null,key:null,playing:!1},this.bindAyahJump(),document.addEventListener("turbolinks:load",()=>this.scrollToTop())}connect(){this.translationTab=document.querySelector(".translation-tab"),this.readingTab=document.querySelector(".reading-tab"),this.el=$(this.element),this.totalVerses=Number(this.el.data("totalVerses")),this.activeTab=this.el.find(".tab-pane.show .verses"),this.segmentTimers=[],this.bindTabs(),setTimeout(()=>{this.isInfoMode()||(this.pageLoader=this.activeTab.closest(".verses-wrapper")[0].infinitePage),this.updatePlayer()},100)}bindTabs(){this.translationTab.addEventListener("tab.shown",e=>this.tabChanged(e,"translation")),this.readingTab.addEventListener("tab.shown",e=>this.tabChanged(e,"reading")),this.activeTab.on("items:added",()=>{this.updatePlayer(!0)})}tabChanged(e,t){this.pausePageLoader();const s=e.currentTarget,n=s.href;let i={};"info"!=t&&(i.reading="reading"==t),n&&this.updateURLState(n,i);const a=$(s.dataset.target).find(".verses-wrapper");this.activeTab=a.find(".verses"),this.pageLoader=a.get(0).infinitePage,this.activeTab.find(".render-async").length>0?document.addEventListener("lazy:loaded",()=>{this.jumpToCurrent(),this.resumePageLoader()},{once:!0}):(this.jumpToCurrent(),this.resumePageLoader())}isReadingMode(){return this.readingTab.classList.contains("tabs__item--selected")}isTranslationsMode(){return this.translationTab.classList.contains("tabs__item--selected")}bindAyahJump(){$("#verse-list").find(".dropdown-item").on("click",e=>{e.preventDefault();const{verse:t,verseKey:s}=e.currentTarget.dataset;this.jumpToVerse(t,s)})}jumpToCurrent(){const e=this.currentVerse;e.key&&this.jumpToVerse(e.number,e.key)}setPlaying(e,t){this.currentVerse.playing=!1,this.currentVerse={key:e,playing:t},t?(this.scrollToCurrent(),this.highlightCurrent()):this.removeHighlighting()}resetSegments(e,t,s){this.removeSegments();let n=t||[],i=1e3*e;$.each(n,(e,t)=>{let n=parseInt(t[2],10),a=parseInt(t[3],10);if(i>a)return!0;if(i>n){if(this.highlightSegment(t[0],t[1]),!s)return}else{let e=n-i;this.segmentTimers.push(setTimeout(()=>{this.highlightSegment(t[0],t[1])},e))}})}highlightSegment(e,t){const s=this.findVerse(this.currentVerse.key).find(".word");if(0==s.length)return;const n=document.body.setting.get("autoShowWordTooltip");this.removeSegmentHighlight();for(let i=parseInt(e,10)+1,a=parseInt(t,10)+1;i<a;i++)if(s.eq(i-1).addClass("highlight"),n){let e=s.eq(i-1)[0].tooltip;e&&e.show()}}removeSegmentHighlight(){$(".word.highlight").each((e,t)=>{let s=t.tooltip;s&&s._popper&&s.hide(),t.classList.remove("highlight")})}jumpToVerse(e,t){return this.findVerse(t).length>0?this.setCurrentVerse(e,t):this.loadVerses(e,t).then(()=>{this.setCurrentVerse(e,t),this.updatePlayer()})}highlightCurrent(){this.removeHighlighting();this.findVerse(this.currentVerse.key).addClass("highlight")}scrollToCurrent(){const e=this.currentVerse,t=this.findVerse(e.key);if(0==t.length)return;$("#verse-list .dropdown-item").removeClass("active"),$("#verse-list").find(`[data-verse-key='${e.key}']`).addClass("active"),$("#ayah-dropdown #current").html(this.verseText(e.key));let s=t.offset().top,n=t.outerHeight(),i=$(window).scrollTop(),a=window.innerHeight,r=$(".header").outerHeight()+$(".surah-actions").outerHeight();const o=s-(r+50);(s+n>i+a-$("#player").outerHeight()||s<i+r)&&document.scrollingElement.scrollTo({top:o,behavior:"smooth"})}insertVerses(e){let t=this.activeTab;return t.html(e),this.activeTab.trigger("items:added"),this.resumePageLoader(),Promise.resolve(t)}removeHighlighting(){const e=$(".verse.highlight");e.length>0&&(e.removeClass("highlight"),this.removeSegments())}removeSegments(){if(this.segmentTimers.length>0){for(let e of this.segmentTimers)clearTimeout(e);this.segmentTimers=[]}this.removeSegmentHighlight()}findVerse(e){return this.activeTab.find(`.verse[data-key='${e}']`)}verseText(e){return this.isChapterMode?Object(i.c)(e):e}disconnect(){document.removeEventListener("turbolinks:load",()=>this.scrollToTop())}scrollToTop(){document.body.scrollIntoView()}pausePageLoader(){this.pageLoader&&this.pageLoader.pause()}resumePageLoader(){this.pageLoader&&this.pageLoader.resume()}updateURLState(e,t){window.history.pushState(t,"",e)}setCurrentVerse(e,t){const s=this.findVerse(t),n=this.currentVerse;return this.currentVerse={number:e,key:t,playing:s.data("playing")},this.scrollToCurrent(),this.highlightCurrent(),n.playing&&this.player.playVerse(t),Promise.resolve([])}updatePlayer(e){const t=this.activeTab.find(".verse");e?this.player.updateVerses(t.first().data("key"),t.last().data("key")):this.player.init(this,t.first().data("key"),t.last().data("key"))}getLazyTab(e,t,s){const n=`{"root":"${t}"}`;return`<div\n              class="render-async my-3"\n              id="render-async-${Math.random().toString(36).substring(7)}"\n              data-path="${e}"\n              data-method="GET"\n              data-headers="{}"\n              data-success-event="lazy:loaded"\n              data-lazy-load=${!!s&&n}\n              data-controller="render-async">\n               <p class="text-center p-3">\n                 <span class='spinner text text--grey'><i class='spinner--swirl'></i></span>\n               </p>\n            </div>`}changeFont(e){let t={translations:document.body.setting.selectedTranslations.join(","),start:this.currentVerse.key,font:e};const s=`${this.readingTab.href}&${$.param(t)}`,n=`${this.translationTab.href}&${$.param(t)}`,i=this.readingTab.dataset.target,a=this.translationTab.dataset.target,r=document.querySelector(i+" .verses"),o=document.querySelector(a+" .verses");return window.pageSettings.font=e,r.innerHTML=this.getLazyTab(s,i,!this.isReadingMode()),o.innerHTML=this.getLazyTab(n,a,!this.isTranslationsMode()),this.currentVerse.key?this.jumpToVerse(this.currentVerse.number,this.currentVerse.key):Promise.resolve()}changeTranslations(e){let t;document.querySelector("#open-translations count").textContent=e.length,t=0==e.length?"no":e.join(","),document.body.loader.show();let s={translations:t,start:this.currentVerse.key};const n=`${this.translationTab.href}&${$.param(s)}`,i=$(this.translationTab.dataset.target).find(".verses");fetch(""+n,{headers:{"X-Requested-With":"XMLHttpRequest"}}).then(e=>e.text()).then(e=>{if(i.html(e),document.body.loader.hide(),this.currentVerse.key)return this.jumpToVerse(this.currentVerse.number,this.currentVerse.key)})}get playingCurrentVerse(){return this.currentVerse.playing}get player(){return document.getElementById("player").player}}},function(e,t,s){"use strict";function n(e,t){if(e.contains)return e!=t&&e.contains(t);let s=e;for(;null!==s;){if(s===t)return!0;s=s.parentNode}return!1}s.d(t,"a",(function(){return n}))},function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));class n{isMobile(){return/iphone|ipad|ipod|android|blackberry|mini|windows\sce|palm/i.test(navigator.userAgent.toLowerCase())||window.innerWidth<992}isChrome(){return/chrom(e|ium)/.test(navigator.userAgent.toLowerCase())}isSafari(){return window.safari||/CriOS/i.test(navigator.userAgent)&&/iphone|ipod|ipad/i.test(navigator.userAgent)}}},,function(e,t,s){"use strict";s.r(t);var n=s(1);let i,a;t.default=class extends n.b{connect(){this.getSetting=document.body.setting.get,this.preloadTrack={},this.currentTrack={howl:null,segments:[]}}buildAudioUrl(e){return/(http)?s?:?\/\//.test(e)||(e="https://audio.qurancdn.com/"+e),e}loadHowler(){return i?Promise.resolve():s.e(5).then(s.t.bind(null,86,7)).then(e=>{i=e.Howl,a=e.Howler})}}},,function(e,t,s){"use strict";(function(e){var n=s(22);t.a=class{loadModal(e,t){this.createModel(t),$("#ajax-modal").on("hidden.bs.modal",(function(e){$("#ajax-modal").empty().remove()})),fetch(e,{headers:{"X-Requested-With":"XMLHttpRequest"}}).then(e=>e.text()).then(e=>{const t=$("<div>").html(e),s=t.find("#title").html(),n=t.find("#modal").html();s&&s.length>0&&(document.getElementById("ajax-modal-title").innerHTML=s,document.getElementById("ajax-modal-body").innerHTML=n)}).catch(e=>{})}createModel(t=""){let s;this.removeModal("ajax-modal"),$(".actions-wrapper").addClass("hidden"),s=`\n        <div class="modal-dialog ${t}">\n          <div class="modal-content">\n            <div class="modal-header">\n              <h5 class="modal-title text text--black" id="ajax-modal-title">Loading</h5>\n              <a class="close text--green" data-dismiss="modal" aria-label="Close">\n                <span aria-hidden="true" class="quran-icon icon-times-circle"></span>\n              </a>\n            </div>\n\n            <div id="ajax-modal-body">\n              <p class="text-center"><span class='spinner text text--grey'><i class='spinner--swirl'></i></span> Loading...</p>\n            </div>\n          </div>\n        </div>`;let i=document.createElement("div");i.classList.add("modal"),i.id="ajax-modal",i.innerHTML=s,document.body.append(i),i.addEventListener("hidden.bs.modal",()=>{this.removeModal()}),e.dialog=new n.a(i,{backdrop:"static"}),e.dialog.show()}removeModal(e){let t=document.getElementById(e||"ajax-modal");if(t){document.body.removeChild(t);let e=document.getElementsByClassName("modal-backdrop");e&&e.length>0&&document.body.removeChild(e[0])}}}}).call(this,s(11))},,,,,,,function(e,t,s){"use strict";t.a=class{static trackEvent(e,t,s,n){return new Promise(i=>{gtag&&gtag("event",e,{event_category:t||e,event_label:s,value:n||1,event_callback:function(){i&&i()}})})}}},,,,function(e,t,s){"use strict";s.r(t),function(e){var t=s(0),n=s.n(t),i=(s(28),s(30),s(21));s(32);s(26).start(),s(27),window.$=window.JQuery=n.a,e.GoogleAnalytic=i.a,s(31),document.addEventListener("turbolinks:request-start",(function(e){e.data.xhr.setRequestHeader("X-Requested-With","XMLHttpRequest")})),s(82)}.call(this,s(11))},,,function(e,t,s){"use strict";s(29)},,function(e,t){document.addEventListener("turbolinks:click",e=>{const t=e.target;t.hash&&t.origin===window.location.origin&&t.pathname===window.location.pathname&&(e.preventDefault(),Turbolinks.controller.pushHistoryWithLocationAndRestorationIdentifier(e.data.url,Turbolinks.uuid()))})},function(e,t){window.addEventListener("beforeinstallprompt",(function(e){GoogleAnalytic.trackEvent("Promote Native Install","AddToHomeScreen","Promoting",1),e.userChoice.then((function(e){"dismissed"==e.outcome?GoogleAnalytic.trackEvent("Cancelled","AddToHomeScreen","Cancelled",1):GoogleAnalytic.trackEvent("Granted","AddToHomeScreen","Granted",1)}))})),"serviceWorker"in navigator&&navigator.serviceWorker.register("/serviceworker.js",{scope:"./"}).then(e=>{console.log("Quran.com SW Registered:",e)}).catch(e=>{console.error("Quran.com SW Registration failed: ",e)})},function(e,t,s){"use strict";var n=s(1),i=s(24);const a=n.a.start(),r=s(33);a.load(Object(i.a)(r))},function(e,t,s){var n={"./ajax_modal_controller.js":34,"./announcement_controller.js":35,"./audio_controller.js":12,"./audio_repeat_setting_controller.js":36,"./bookmarks_controller.js":37,"./chapter_controller.js":38,"./chapter_info_controller.js":39,"./choose_locales_controller.js":40,"./choose_recitation_controller.js":41,"./choose_translations_controller.js":42,"./copy_advanced_controller.js":43,"./donation_controller.js":45,"./feedback_controller.js":46,"./filter_list_controller.js":47,"./filterable_dropdown_controller.js":48,"./font_controller.js":49,"./footnote_controller.js":50,"./infinite_page_controller.js":84,"./menu_controller.js":51,"./player_controller.js":52,"./quran_controller.js":8,"./quran_juz_controller.js":53,"./quran_page_controller.js":54,"./render_async_controller.js":85,"./search_form_controller.js":55,"./search_result_controller.js":66,"./search_results_controller.js":67,"./search_suggestions_controller.js":68,"./segment_player_controller.js":69,"./segment_selection_controller.js":70,"./setting_controller.js":4,"./share_controller.js":71,"./sidebar_controller.js":72,"./spinner_controller.js":73,"./tabs_controller.js":74,"./tafsir_modal_controller.js":75,"./theme_controller.js":76,"./track_controller.js":77,"./translation_controller.js":78,"./verse_controller.js":79,"./word_controller.js":80,"./word_player_controller.js":81};function i(e){var t=a(e);return s(t)}function a(e){if(!s.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=a,e.exports=i,i.id=33},function(e,t,s){"use strict";s.r(t);var n=s(1),i=s(14);t.default=class extends n.b{connect(){this.element.addEventListener("click",e=>this.loadModal(e))}loadModal(e){e.preventDefault(),e.stopImmediatePropagation();let t=$(e.currentTarget),s=t.data("url"),n=t.data("class");(new i.a).loadModal(s,n)}}},function(e,t,s){"use strict";s.r(t);var n=s(1),i=s(7);s(14);t.default=class extends n.b{connect(){this.el=$(this.element),this.store=new i.a,this.canShowJobsBanner()&&this.show()}show(){this.el.find(".close").on("click",e=>{e.preventDefault(),this.onHide(e)}),this.el.find(".cta").on("click",e=>{this.onHide(e)}),this.el.removeClass("hidden")}onHide(e){this.store.set("ann-"+this.el.data("id"),(new Date).getTime()),this.el.addClass("hidden")}canShowJobsBanner(){return!this.dismissedAt}get dismissedAt(){return this.store.get("ann-"+this.el.data("id"))}get popupShownAt(){return this.store.get("pop-"+this.el.data("id"))}}},function(e,t,s){"use strict";s.r(t);var n=s(4),i=s(6);s(3);t.default=class extends n.default{connect(){super.connect();$(this.element).find(".simple-select").select2({dropdownAutoWidth:!0,width:"100%",dropdownCssClass:"select-stylee",placeholder:"selected option"}),this.pageMode="true"==this.element.dataset.pageMode,this.bindSwitch(),this.bindRepeatSingle(),this.bindRepeatRange(),this.bindPause()}bindSwitch(){let e=$("#repeat-switch"),t=$("#tooltip-switch");e.on("change",()=>{const t=e.is(":checked");this.set("repeatEnabled",t),this.updatePlayerRepeat(),t?$(".audio-control").removeClass("hidden fade"):$(".audio-control").addClass("hidden fade")}),t.on("change",()=>{const e=t.is(":checked");this.set("autoShowWordTooltip",e)}),e[0].checked=this.get("repeatEnabled"),t[0].checked=this.get("autoShowWordTooltip"),e.trigger("change"),t.trigger("change")}bindRepeatSingle(){this.repeatSingle=$("#repeat-single-ayah"),this.repeatSingleTimes=$("#repeat-single-times"),this.repeatSingle.on("change",()=>this.updateRepeatSingle()),this.repeatSingleTimes.on("change",()=>this.updateRepeatSingle());let e=document.querySelector("#repeat-single");e.addEventListener("shown.bs.tab",()=>this.updateRepeatSingle()),e.addEventListener("change",()=>this.toggle())}toggle(){document.querySelector(".single-ayah").classList.toggle("hidden"),document.querySelector(".range-ayah").classList.toggle("hidden")}bindRepeatRange(){this.repeatRangeFrom=$("#repeat-range-from"),this.repeatRangeTo=$("#repeat-range-to"),this.repeatRangeTimes=$("#repeat-range-times"),this.repeatRangeTo.attr("disabled",!0),this.repeatRangeFrom.on("change",e=>{const t=Number(this.repeatRangeFrom.val());this.repeatRangeTo.val(0),this.repeatRangeTo.find("option").each((e,s)=>{const n=Number(s.value);s.disabled=n>0&&n<t}),this.repeatRangeTo.attr("disabled",!1),this.updateRepeatRange()}),this.repeatRangeTo.on("change",()=>this.updateRepeatRange()),this.repeatRangeTimes.on("change",()=>this.updateRepeatRange());let e=document.querySelector("#repeat-range");e.addEventListener("shown.bs.tab",()=>this.updateRepeatRange()),e.addEventListener("change",()=>this.toggle())}updateRepeatSingle(){const e=this.repeatSingle.val();this.set("repeatType","single"),this.set("repeatCount",Number(this.repeatSingleTimes.val())),this.set("repeatAyah",e),this.updatePlayerRepeat()}jumpTo(e){return 0==this.pageMode?Object(i.a)().loadVerses(null,e):Object(i.a)().setCurrentVerse(e,e)}updateRepeatRange(){const e=this.repeatRangeFrom.val();this.set("repeatType","range"),this.set("repeatCount",Number(this.repeatRangeTimes.val())),this.set("repeatFrom",e),this.set("repeatTo",this.repeatRangeTo.val()),this.updatePlayerRepeat()}bindPause(){const e=$("#pause-bw-ayah-seconds");$("[name='pause-bw-ayah']").on("change",()=>{this.updatePause(e.val())}),e.on("change",()=>{this.updatePause(e.val())})}updatePause(e){$("#pause-ayah").is(":checked")?this.set("pauseBwAyah",Number(e)):this.set("pauseBwAyah",0);let t,s=document.getElementById("player");if(s&&(t=s.player),t)return t.updatePause(this.get("pauseBwAyah"))}updatePlayerRepeat(){let e,t,s=0;"single"==this.get("repeatType")?(s=this.get("repeatAyah"),e=s,t=s):(s=this.get("repeatFrom"),e=s,t=this.get("repeatTo")),s&&(document.body.loader.show(),this.jumpTo(s).then(()=>{document.body.loader.hide();let s,n=document.getElementById("player");n&&(s=n.player),s&&(s.updateRepeat({repeatEnabled:this.get("repeatEnabled"),repeatCount:this.get("repeatCount"),repeatType:this.get("repeatType"),repeatAyah:this.get("repeatAyah"),repeatFrom:this.get("repeatFrom"),repeatTo:this.get("repeatTo")},{first:e,last:t}),s.createHowlAndPlay())}))}}},function(e,t,s){"use strict";s.r(t),s.d(t,"default",(function(){return a}));var n=s(1),i=s(7);class a extends n.b{connect(){const e=Object.entries(this.loadBookmarks());for(const[t,s]of e)this.addBookmark(t,s);e.length>0&&this.element.classList.remove("hidden")}loadBookmarks(){try{return JSON.parse(this.constructor.store.get("bookmarks")||"{}")}catch(e){return{}}}addBookmark(e,t){$("#bookmark-list").append(`<a class="btn btn--lightgreen btn--large" data-controller="track" data-name="bookmarks" data-category="${e}" href="${t}"><span class="en">${e}</span></a>`)}}a.store=new i.a(!0)},function(e,t,s){"use strict";s.r(t);var n=s(8);s(3);t.default=class extends n.default{connect(){super.connect(),this.infoTab=document.querySelector(".surah-info-tab"),this.infoTab.addEventListener("tab.shown",e=>this.tabChanged(e,"info"))}isInfoMode(){return this.infoTab.classList.contains("tabs__item--selected")}id(){return this.el.data("id")}loadVerses(e,t){document.body.loader.show(),this.pausePageLoader();const s=this.id(),n=this.isReadingMode();let i,a;const r=document.body.setting;i=r.currentFont,a=r.selectedTranslations.join(",");let o=fetch(`/${s}/load_verses?${$.param({start:t,reading:n,font:i,translations:a})}`,{headers:{"X-Requested-With":"XMLHttpRequest"}}).then(e=>e.text()).then(e=>{document.body.loader.hide(),this.insertVerses(e)});return Promise.resolve(o)}get isChapterMode(){return!0}}},function(e,t,s){"use strict";s.r(t);var n=s(1);t.default=class extends n.b{connect(){const e=$(this.element);e.addClass("text text--grey"),e.find("p, ul, span").addClass("text--medium text--regular"),e.find("h2, h3").addClass("text text--darkgrey text--large text--semibold")}}},function(e,t,s){"use strict";s.r(t);var n=s(4);t.default=class extends n.default{connect(){super.connect(),$(this.element).find("[name=locale]").on("change",e=>{e.preventDefault(),this.updateLocale(e.target.value)})}disconnect(){$(document).off("change","[name=locale]",e=>{})}updateLocale(e){Turbolinks.visit(parent.window.location.origin+parent.window.location.pathname+"?locale="+e)}}},function(e,t,s){"use strict";s.r(t);var n=s(4),i=s(5);const a={mujawwad:"Mujawwad is a melodic style of Holy Quran recitation",murattal:"Murattal is at a slower pace, used for study and practice",muallim:"Muallim is teaching style recitation of Holy Quran"};t.default=class extends n.default{connect(){super.connect();const e=this.get("recitation");this.element.querySelectorAll("[name=recitation]").forEach(t=>{e==t.value&&(t.setAttribute("checked","checked"),$(t).prop("checked",!0))}),$(this.element).find("[name=recitation]").on("change",e=>{e.preventDefault(),e.stopImmediatePropagation(),this.updateReciter(e.target.value)}),this.element.querySelectorAll("[data-style]").forEach(e=>{new i.a(e,{direction:"left",title:a[e.dataset.style],sanitize:!1})})}disconnect(){$(document).off("change","[name=font]",e=>{})}updateReciter(e){let t=document.getElementById("player").player;this.set("recitation",e),t.setRecitation(e)}}},function(e,t,s){"use strict";s.r(t);var n=s(4),i=s(6);t.default=class extends n.default{connect(){super.connect(),this.bindClearAll();const e=window.pageSettings?window.pageSettings.translations:this.get("translations");this.element.querySelectorAll(".translation-checkbox").forEach(t=>{e.includes(Number(t.value))&&t.setAttribute("checked","checked")}),$(this.element).find(".translation-checkbox").on("change",e=>{e.preventDefault(),e.stopImmediatePropagation(),this.updateTranslations()})}bindClearAll(){$("#translation-clear-all").on("click",()=>this.clearAllTranslations())}disconnect(){}updateTranslations(){let e=[];document.querySelectorAll(".translation-checkbox:checked").forEach(t=>{e.push(t.value)}),this.set("translations",e),Object(i.a)().changeTranslations(e)}clearAllTranslations(){document.querySelectorAll(".translation-checkbox").forEach(e=>{e.checked=!1}),this.set("translations",[]),Object(i.a)().changeTranslations([])}}},function(e,t,s){"use strict";s.r(t);var n=s(1),i=s(13),a=s.n(i),r=s(3);t.default=class extends n.b{connect(){const{verseKey:e}=this.element.dataset;this.verseKey=e,this.rangeType="single",this.selects=$(".simple-select").select2({dropdownAutoWidth:!0,width:"100%",dropdownCssClass:"select-stylee",placeholder:"selected option"}),this.copyRangeFrom=$("#copy-range-ayah-from"),this.copyRangeTo=$("#copy-range-ayah-to"),0==this.copyRangeTo.val().length&&this.copyRangeTo.attr("disabled",!0),this.bindingElements()}disconnect(){const e=this.selects.data("select2");e&&e.destroy()}bindingElements(){this.copyRangeFrom.on("change",e=>{const t=this.copyRangeFrom.val();if("0"==t)return this.copyRangeTo.attr("disabled",!0),void this.copyRangeTo.find("option").attr("disabled","disabled");const s=Object(r.a)(t);this.copyRangeTo.find("option").each((e,t)=>{if(0!=t.value){const e=Object(r.a)(t.value);t.disabled=e<s}}),this.copyRangeTo.attr("disabled",!1)});$(this.element).find("[name=copy-type]").on("change",e=>{this.rangeType=e.currentTarget.value;const t=document.querySelector(".copy-range-ayah").classList;"single"==this.rangeType?t.add("hidden"):t.remove("hidden")});const e=this.element.querySelector("#copy");e.addEventListener("click",t=>{t.preventDefault(),this.doCopy(e)})}doCopy(e){e.innerHTML="Please wait..",e.disabled=!0,$("#file-notice").addClass("hidden"),this.getText().then(e=>e.text()).then(t=>{a()(t),e.innerHTML="Copied!",e.disabled=!1,this.prepareTextFile(t),setTimeout(()=>{e.innerHTML="Copy text"},3e3)}).catch(t=>{e.innerHTML="Copy text",e.disabled=!1,$("#error-notice").removeClass("hidden")})}prepareTextFile(e){const t=new Blob([e],{type:"text/plain"}),s=$("#file-notice").find("a")[0];s.href=URL.createObjectURL(t),s.download="quran.copy.txt",$("#file-notice").removeClass("hidden")}getText(){$("#error-notice").addClass("hidden");let[e,t]=[this.verseKey,this.verseKey];if("multiple"==this.rangeType&&(e=this.copyRangeFrom.val(),t=this.copyRangeTo.val()),!this.validSelection(e,t))return Promise.reject("Invalid ayah range");const s={arabic:this.addArabic(),footnote:this.addFootnote(),translations:this.selectedTranslations().join(","),from:e,to:t};const n="/advance_copy/copy_text?"+$.param(s);return fetch(n,{headers:{"X-Requested-With":"XMLHttpRequest"}})}validSelection(e,t){if(0==e||0==t||void 0==e||void 0==t||0==e.length||0==t.length)return!1;return Object(r.a)(e)<=Object(r.a)(t)}selectedTranslations(){return[...this.element.querySelectorAll('input[name="copy-translation"]:checked')].map(e=>e.value)}addFootnote(){return this.element.querySelector(".copy-footnote:checked").value}addArabic(){return this.element.querySelector("#copy-arabic").checked}}},,function(e,t,s){"use strict";s.r(t);var n=s(1);t.default=class extends n.b{connect(){this.element.addEventListener("click",e=>{givingloop("donate",{amount:50,monthly:!0})})}}},function(e,t,s){"use strict";s.r(t);var n=s(1);t.default=class extends n.b{connect(){this.form=$(this.element),this.form.find("#submit").on("click",e=>(0==this.validate(e,this.form[0])||this.submit(),!1)),this.form.on("submit",e=>(0==this.validate(e,this.form[0])||this.submit(),!1))}validate(e,t){return e.preventDefault(),e.stopPropagation(),$(t).hasClass("was-validated")||$(t).addClass("was-validated"),!1!==t.checkValidity()||(t.reportValidity(),!1)}submit(){const e=this.form.find("[type='submit']")[0];this.element.querySelector("#current-url").value=window.location.href,e.innerHTML='<span class="quran-icon icon-loading"></span>',e.disabled=!0;var t={"X-Requested-With":"XMLHttpRequest"},s=document.querySelector('meta[name="csrf-token"]');s&&(t["X-CSRF-Token"]=s.content);var n={headers:t,mode:"cors",method:"POST",body:new FormData(this.element)};fetch(this.element.action,n).then(e=>e.json()).then(t=>{e.innerHTML="Submit",e.disabled=!1,this.form.find("#notice").html(t.message).removeClass("hidden")}).catch(e=>{console.log(e)})}}},function(e,t,s){"use strict";s.r(t);var n=s(1);t.default=class extends n.b{connect(){this.el=$(this.element),this.listFilter(this.el.data("list"),this.el.data("input"))}listFilter(e,t){let s=this,n=$(e),i=$(t);i.length&&(i.is(":visible")&&i.trigger("focus"),i.on("change",()=>{var e=i.val().toLowerCase();s.doFilter(e,n)}),i[0].addEventListener("search",()=>i.trigger("change")),i.keyup(()=>{i.trigger("change")}))}doFilter(e,t){if(e.length>=1){e=e.toLowerCase();t.find("[data-filter-tags]").each((t,s)=>{if(s.dataset.filterTags.includes(e)){s.classList.remove("hidden");const e=s.parentNode;e.classList.contains("hidden")&&e.classList.remove("hidden")}else s.classList.add("hidden")})}else t.find("[data-filter-tags]").removeClass("hidden filter-show")}}},function(e,t,s){"use strict";s.r(t);var n=s(1),i=s(9);const a=["label--open","label__opened"];t.default=class extends n.b{connect(){const{trigger:e,dropdown:t}=this.element.dataset;this.menuTrigger=document.querySelector(e),this.dropdownWrapper=document.querySelector(t),this.closeTrigger=this.element.querySelector("#close-dropdown"),this.isOpen=!1,this.onClicked=this.click.bind(this),this.onToggle=this.toggle.bind(this),this.menuTrigger.addEventListener("click",this.onToggle),this.closeTrigger.addEventListener("click",e=>{e.stopImmediatePropagation(),this.close()})}toggle(e){if(this.isOpen){const t=e.target;Object(i.a)(this.dropdownWrapper,t)||this.close()}else this.open()}disconnect(){}click(e){const t=e.target;return this.isOpen&&!Object(i.a)(this.dropdownWrapper,t)&&this.close(),!0}close(){document.removeEventListener("click",this.onClicked),this.isOpen=!1,this.menuTrigger.classList.remove(...a)}open(){document.addEventListener("click",this.onClicked),this.menuTrigger.classList.add(...a);const e=this.element.querySelector("input");e&&e.focus(),setTimeout(()=>{this.isOpen=!0},100)}}},function(e,t,s){"use strict";s.r(t);var n=s(4),i=s(6);t.default=class extends n.default{connect(){super.connect(),this.font=this.get("font"),$(`[value=${this.font}]`).attr("checked","checked"),$(document).on("change","[name=font]",e=>{e.preventDefault(),e.stopImmediatePropagation(),this.changeFont(e.target)})}disconnect(){$(document).off("change","[name=font]",e=>{})}changeFont(e){this.set("font",e.value),Object(i.a)().changeFont(e.value).then(()=>{this.updateFontSize()})}}},function(e,t,s){"use strict";s.r(t);var n=s(1);t.default=class extends n.b{connect(){this.updateInternalLinks();this.element.querySelector("#close-footnote").addEventListener("click",()=>{this.element.classList.toggle("d-none")})}updateInternalLinks(){this.element.querySelectorAll("a").forEach(e=>{if(e.host===location.host){e.classList.remove(),e.classList.add("see-more"),e.setAttribute("data-controller","ajax-modal"),e.setAttribute("data-class","modal-lg");const t=e.pathname.replace("/","").split(":"),s=t[0],n=t[1].split("-"),i=$(this.element).closest(".verse__translations").data("resourceContentId"),a=`/${s}/referenced_verse?from=${n[0]}&to=${n[1]||n[0]}&translations=${i}`;e.setAttribute("data-url",a),e.href="javascript:;"}})}}},function(e,t,s){"use strict";s.r(t);var n=s(1),i=s(9);t.default=class extends n.b{connect(){const{trigger:e,menu:t}=this.element.dataset;this.menuWraper=document.querySelector("#menus-wrapper"),this.menuTrigger=document.querySelector(e),this.targetMenu=document.querySelector(t),this.isOpen=!1,this.menuTrigger.addEventListener("click",e=>this.toggle(e)),".site-menu"==t&&this.element.querySelector("#close-menu").addEventListener("click",e=>this.close(e))}toggle(e){e.preventDefault(),this.isOpen?this.close():this.open()}disconnect(){this.menuWraper.removeEventListener("click",this.onClicked,!1)}click(e){const t=e.target;Object(i.a)(this.element,t)||this.close()}close(){this.isOpen=!1,this.menuWraper.removeEventListener("click",this.onClicked,!0),this.menuWraper.classList.add("hidden"),this.element.classList.add("hidden")}open(){this.isOpen=!0,this.onClicked=this.click.bind(this),this.menuWraper.addEventListener("click",this.onClicked,!0),this.menuWraper.classList.remove("hidden"),this.element.classList.remove("hidden")}showFeedbackModal(){this.close(),$("#feedback-modal").modal("show")}}},function(e,t,s){"use strict";s.r(t);var n=s(12),i=s(5),a=s(3);t.default=class extends n.default{connect(){super.connect(),this.element.player=this,this.el=$(this.element),this.progressInterval=null,this.repeatCurrent=!1,this.audioData={},this.pauseSeconds=0,this.readerController=null,this.firstVerse=null,this.lastVerse=null,this.currentVerse=null,this.playBtn=null,this.loadingBtn=null,this.segmentPlayer=!1,this.customSegments=[],this.loadSettings(),this.buildPlayer(),this.bindPlayerEvents()}loadSettings(){this.config={autoScroll:this.getSetting("autoScroll"),recitation:this.getSetting("recitation"),showTooltip:!1,repeat:{verse:null,type:this.getSetting("repeatType")||"single",count:this.getSetting("repeatCount"),from:this.getSetting("repeatFrom"),to:this.getSetting("repeatTo"),currentIteration:1}},this.pauseSeconds=0}updatePause(e){this.pauseSeconds=e}updateRepeatCount(e){this.config.repeat.count=e}updateRepeat(e,t){this.config.repeat={enabled:e.repeatEnabled,count:e.repeatCount,type:e.repeatType,verse:e.repeatAyah,from:e.repeatFrom,to:e.repeatTo,currentIteration:1},this.firstVerse=t.first,this.lastVerse=t.last,this.currentVerse=t.first}createHowlAndPlay(){this.createHowl(this.currentVerse).then(()=>{this.isPlaying()&&this.play(this.currentVerse)})}init(e,t,s){this.readerController=e,this.firstVerse=t,this.lastVerse=s,this.currentVerse=t,this.loadVerseAudio(this.currentVerse)}updateVerses(e,t,s=!1,n=[]){this.firstVerse=e,this.lastVerse=t,this.segmentPlayer=s,this.customSegments=n}disconnect(){this.isPlaying()&&this.currentHowl.stop(),this.preloadTrack={},this.audioData={},"undefined"!=typeof Howler&&Howler.unload(),this.progressBar.removeEventListener("change",this.onProgressChanged),this.progressBar.disabled=!0}isPlaying(){return!!this.currentHowl&&this.currentHowl.playing()}isLoading(){return!this.currentHowl||"loaded"!=this.currentHowl.state()}buildPlayer(){this.progressBar=this.el.find("#player-range").get(0),this.progressBar.disabled=!0,this.bindAutoScroll(),this.bindRepeatCurrentAyah()}bindAutoScroll(){const e=this.element.querySelector("#btn-scroll");let t=e.classList;new i.a(e,{placement:"top",boundary:"window",html:!0,sanitize:!1,title:e.dataset.title}),this.config.autoScroll&&t.add("selected"),e.addEventListener("click",e=>{e.preventDefault(),this.config.autoScroll=!this.config.autoScroll,this.config.autoScroll?(t.add("selected"),this.readerController.scrollToCurrent()):t.remove("selected")})}bindRepeatCurrentAyah(){const e=$("#player .icon-repeat");new i.a(e[0],{placement:"top",boundary:"window",html:!0,sanitize:!1,title:e.data("title")}),e.on("click",t=>{t.preventDefault(),this.repeatCurrent=!this.repeatCurrent,e.toggleClass("selected")})}play(e){if(this.currentHowl){if(e==this.currentTrack.verse)return void(this.isPlaying()||this.currentHowl.play());this.currentHowl.pause()}e=e||this.currentVerse,this.progressBar.disabled=!1,this.progressBar.value=this.progressBar.value||0,this.currentVerse=e,this.loadTrack(this.currentVerse).then(e=>{this.currentTrack=e,this.segmentPlayer?e.howl.play("selectedWords"):e.howl.play()})}playCurrent(){this.loading(),this.play(this.currentVerse)}playVerse(e){if(this.isPlaying()){if(e==this.currentTrack.verse)return setTimeout(()=>{this.resetSegments()},50),void this.readerController.setPlaying(e,!0);this.currentHowl.stop()}this.currentVerse=e,this.playCurrent()}pauseCurrent(){this.isPlaying()&&this.currentHowl.pause()}playNext(){this.config.repeat.currentIteration=1;const e=this.getNextTrackVerse();e&&this.playVerse(e)}playPrevious(){this.config.repeat.currentIteration=1;const e=this.getPreviousTrackVerse();e&&this.playVerse(e)}bindPlayerEvents(){this.playBtn=this.el.find("#btn-play"),this.pauseBtn=this.el.find("#btn-pause"),this.loadingBtn=this.el.find("#btn-loading"),this.previousBtn=this.el.find("#btn-previous"),this.nextBtn=this.el.find("#btn-next"),new i.a(this.loadingBtn.get(0),{placement:"top",boundary:"window",html:!0,sanitize:!1,title:this.loadingBtn.data("title")}),this.playBtn.on("click",e=>{e.preventDefault(),this.playCurrent()}),this.pauseBtn.on("click",e=>{e.preventDefault(),this.pauseCurrent()}),this.previousBtn.on("click",e=>{e.preventDefault(),this.playPrevious()}),this.nextBtn.on("click",e=>{e.preventDefault(),this.playNext()}),this.progressBar.addEventListener("change",e=>this.onProgressChanged(e.target.value))}onProgressChanged(e){if(this.currentHowl){let t=this.currentHowl.duration()/100*e;this.currentHowl.seek(t)}}loading(){this.setPlayerCtrls("loading")}setPlayerCtrls(e){let t=this.readerController.findVerse(this.currentVerse).find(".play .quran-icon");t.removeClass("icon-play1 icon-pause icon-loading"),"play"==e?(this.playBtn.removeClass("d-none"),this.loadingBtn.addClass("d-none"),this.pauseBtn.addClass("d-none"),t.addClass("icon-play1")):"pause"==e?(this.playBtn.addClass("d-none"),this.loadingBtn.addClass("d-none"),this.pauseBtn.removeClass("d-none"),t.addClass("icon-pause")):(this.playBtn.addClass("d-none"),this.loadingBtn.removeClass("d-none"),this.pauseBtn.addClass("d-none"),t.addClass("icon-loading")),this.segmentPlayer&&document.getElementById("segment-player").segmentPlayer.setPlayerCtrls(e)}pad(e,t){return(e+="").length>=t?e:new Array(t-e.length+1).join("0")+e}formatTime(e){const t=Math.floor(e/60),s=Math.floor(e-60*t);return this.pad(t,2)+":"+this.pad(s,2)}preloadNextVerse(){let e=this.getNextTrackVerse();e?(this.loadTrack(e),this.nextBtn.removeAttr("disabled")):this.nextBtn.attr("disabled","disabled")}onPlay(){this.readerController.setPlaying(this.currentVerse,!0),this.setProgressBarInterval(),this.resetSegments(),this.preloadNextVerse()}getNextTrackVerse(){const e=Object(a.a)(this.lastVerse),t=Object(a.a)(this.currentVerse);if(t<e)return Object(a.b)(t+1)}getPreviousTrackVerse(){const e=Object(a.a)(this.firstVerse),t=Object(a.a)(this.currentVerse);if(t>e)return Object(a.b)(t-1)}removeProgressInterval(){clearInterval(this.progressInterval)}setProgressBarInterval(){this.removeProgressInterval();const e=this.currentHowl.duration(),t=$("#player .current-time");t.removeClass("hidden").text("00:00"),$("#player .all-time").removeClass("hidden").text(this.formatTime(e)),this.progressInterval=setInterval(()=>{let s=this.currentHowl.seek(),n=Math.floor(s/e*1e3)/10;this.progressBar.value=n,document.getElementById("player-range").style.background="linear-gradient(to right, #00acc2 0%, #00acc2 "+n+"%, #fff "+n+"%, white 100%)",t.text(this.formatTime(s))},500)}removePlayerListeners(){this.readerController.removeHighlighting(),this.removeProgressInterval(),this.setPlayerCtrls("play")}onVerseEnd(){this.pauseSeconds>0?(this.segmentPlayer&&document.getElementById("segment-player").segmentPlayer.setPlayerCtrls(),setTimeout(()=>this.onVerseEnded(),1e3*this.pauseSeconds)):this.onVerseEnded()}onVerseEnded(){if(this.readerController.setPlaying(this.currentVerse,!1),this.repeatCurrent)return this.playCurrent();this.config.repeat.enabled?"single"==this.config.repeat.type?this.repeatSingleVerse():this.repeatRangeVerses():this.playNext()}repeatSingleVerse(){this.config.repeat.currentIteration<=this.config.repeat.count?(this.config.repeat.currentIteration++,this.playCurrent()):this.segmentPlayer?document.getElementById("segment-player").segmentPlayer.closePlayer():(this.config.repeat.currentIteration=1,this.playNext())}repeatRangeVerses(){let e=this.config.repeat;this.currentVerse==e.to?e.currentIteration<=e.count?(this.play(e.from),e.currentIteration++):this.currentVerse=e.from:this.playNext()}onSeek(){this.isPlaying()?(this.setProgressBarInterval(),setTimeout(()=>{this.resetSegments()},50)):this.resetSegments()}resetSegments(){this.readerController.resetSegments(this.currentHowl.seek(),this.preloadTrack[this.currentVerse].segments,this.isPlaying())}loadTrack(e){return void 0==this.preloadTrack[e]||this.segmentPlayer?(this.loading(),this.createHowl(e)):Promise.resolve(this.preloadTrack[e])}createHowl(e){return this.loadVerseAudio(e).then(()=>{let t=this.audioData[e],s=this.buildAudioUrl(t.path),n={};if(this.segmentPlayer){const e=+t.segments[this.customSegments[0]][2],s=this.customSegments[this.customSegments.length-1],i=+t.segments[s][3]-e;n.selectedWords=[e,i],n.__default=[0,+t.segments[t.segments.length-1][3]]}return this.loadHowler().then(()=>{let i=new Howl({src:[s],html5:false,sprite:n,autoplay:!1,onloaderror:()=>{},onplayerror:()=>{this.setPlayerCtrls("play"),this.currentHowl.once("unlock",()=>{this.currentHowl.play()})},onplay:()=>{this.onPlay(),this.setPlayerCtrls("pause")},onpause:()=>{this.setPlayerCtrls("play"),this.removePlayerListeners()},onstop:()=>{this.setPlayerCtrls("play"),this.removePlayerListeners()},onseek:()=>{this.removePlayerListeners(),this.onSeek()},onend:()=>{this.setPlayerCtrls("play"),this.removePlayerListeners(),this.onVerseEnd()}});return this.preloadTrack[e]={howl:i,segments:t.segments,verse:e},Promise.resolve(this.preloadTrack[e])})})}setRecitation(e){const t=this.isPlaying();this.config.recitation=e,this.preloadTrack={},this.audioData={},this.loadVerseAudio(this.currentVerse).then(()=>{t&&this.play(this.currentVerse)})}loadVerseAudio(e){return this.audioData[e]?Promise.resolve(this.audioData[e]):this.fetchAudioData(e)}fetchAudioData(e){let t=this.audioData,s=[],n={recitation:this.config.recitation,verse:e},i=e=>{let s=Object.entries(e);for(const[n,i]of s)t[n]={path:i.audio,duration:i.duration,segments:i.segments}},a=fetch("/audio?"+$.param(n)).then(e=>e.json()).then(e=>i(e)).catch(e=>i({}));return s.push(a),Promise.all(s)}get currentHowl(){if(this.currentTrack)return this.currentTrack.howl}}},function(e,t,s){"use strict";s.r(t);var n=s(8);t.default=class extends n.default{isInfoMode(){return!1}id(){return this.element.dataset.id}loadVerses(e,t){document.body.loader.show(),this.pausePageLoader();const s=this.id(),n=this.isReadingMode(),i=document.body.setting,a=i.currentFont,r=i.selectedTranslations.join(",");let o=fetch(`/juz/${s}/load_verses?${$.param({start:t,reading:n,font:a,translations:r})}`,{headers:{"X-Requested-With":"XMLHttpRequest"}}).then(e=>e.text()).then(e=>{document.body.loader.hide(),this.insertVerses(e)});return Promise.resolve(o)}get isChapterMode(){return!1}}},function(e,t,s){"use strict";s.r(t);var n=s(8);t.default=class extends n.default{isInfoMode(){return!1}id(){return this.element.dataset.juzNumber}getVerseKey(e){return e}get isChapterMode(){return!1}}},function(e,t,s){"use strict";s.r(t);var n=s(1),i=s(23),a=s.n(i),r=s(10);t.default=class extends n.b{connect(){this.el=$(this.element),this.device=new r.a,this.suggestions=this.el.find("#suggestions"),this.bindSuggestion(),document.addEventListener("click",e=>{this.element.contains(e.target)?this.showSuggestions():this.hideSuggestions()})}bindSuggestion(){this.searchBox=this.el.find("[name=query]"),this.searchBox[0].addEventListener("search",()=>{this.searchBox.trigger("change")}),this.searchBox.change(e=>{this.getSuggestions(e.target.value)}).keyup(a()((function(e){$(this).change()}),150))}getSuggestions(e){e&&e.length>0?(this.showSuggestions(),fetch("/search/suggestion?query="+e).then(e=>e.text()).then(e=>{this.suggestions.html(e)}).catch(e=>callback([]))):this.hideSuggestions()}showSuggestions(){this.el.addClass("show-suggestion")}hideSuggestions(){this.el.removeClass("show-suggestion")}doSearch(e){Turbolinks.visit("/search?query="+e)}}},,,,,,,,,,,function(e,t,s){"use strict";s.r(t);var n=s(1);t.default=class extends n.b{connect(){this.el=$(this.element),this.el.find(".view-more").on("click",e=>this.showAllResults(e))}showAllResults(e){e.preventDefault(),this.el.find(".more-items").addClass("hidden"),this.el.find(".search-item--translation").removeClass("hidden")}}},function(e,t,s){"use strict";s.r(t);var n=s(1);t.default=class extends n.b{connect(){const e=$(this.element);this.selects=e.find(".simple-select").select2({dropdownAutoWidth:!0,width:"100%",dropdownCssClass:"select-stylee",placeholder:"selected option"}),e.find(".simple-select").on("change",t=>{e.find("form").submit()})}disconnect(){const e=this.selects.data("select2");e&&e.destroy()}}},function(e,t,s){"use strict";s.r(t);var n=s(1);t.default=class extends n.b{connect(){0==$(".search-result ul li").length&&$(".suggestions").empty()}}},function(e,t,s){"use strict";s.r(t);var n=s(1);t.default=class extends n.b{connect(){this.config={times:2,seconds:5},this.element.segmentPlayer=this,this.playerConfig={},this.currentVerse=null,this.lastVerse=null,this.bindListener()}play(){const e=this.selectedWords;if(0==e.length)return;document.querySelector("body").classList.add("small-player"),document.querySelector("#play-selected-wrapper").classList.remove("active");let t=this.getPlayer();if(t){null==this.currentVerse&&(this.lastVerse=t.lastVerse,this.currentVerse=t.currentVerse);const s=e[0].dataset.key.split(":").slice(0,2).join(":"),n=[...e].map(e=>+e.dataset.key.split(":").slice(-1)-1);t.updateVerses(s,s,!0,n),t.updatePause(this.config.seconds),t.updateRepeat({repeatEnabled:!0,repeatCount:this.config.times-1,repeatType:"single",repeatAyah:s},{first:s,last:s},n),t.play(s)}}getPlayer(){return document.getElementById("player").player}closePlayer(){const e=document.getElementById("reader").segmentSelection;e&&e.deselect()}bindListener(){$(document).on("segment:selected",(function(e,t){$(".play-segment").addClass("active"),$(".play-selected-wrapper").removeClass("active")})),$(document).on("segment:removed",(function(){$(".play-segment, .play-selected-wrapper").removeClass("active"),document.querySelector("#playing-part").children[0].classList="icon-loading",document.querySelector("#playing-part").children[1].innerText="Loading",document.querySelector("body").classList.remove("small-player");let e=document.getElementById("segment-player").segmentPlayer,t=e.getPlayer();t&&(t.isPlaying()&&t.currentHowl.stop(),e.currentVerse&&(t.updateVerses(e.currentVerse,e.lastVerse),t.loadSettings()))})),$(document).on("el:selecting",(function(){$(".play-segment, .play-selected-wrapper").removeClass("active")})),document.querySelector("#play-selected--playbutton").addEventListener("click",e=>this.play(e)),document.querySelector("#play-bar-close").addEventListener("click",e=>this.closePlayer(e)),document.querySelector("#close-play-selected").addEventListener("click",()=>this.closePlaySegment()),document.querySelector("#segment-player").addEventListener("click",()=>this.showPlaySegment()),document.querySelectorAll(".counter__button").forEach(e=>{e.addEventListener("click",e=>this.handleCounterButtons(e))}),document.querySelector("#playing-part").addEventListener("click",e=>this.handlePlayerButton(e))}showPlaySegment(){document.querySelector("#play-selected-wrapper").classList.add("active"),document.querySelector("#segment-player").classList.add("active")}closePlaySegment(){document.querySelector("#play-selected-wrapper").classList.remove("active"),document.querySelector("#segment-player").classList.remove("active")}handleCounterButtons(e){const t=e.target.dataset,s=+t.increment;let n=$(".counter__text."+t.type),i=+n.data("value")+s;if(i>=+t.min){this.config[t.type]=i,n.data("value",i).text(`${i} ${t.type}`);let e=document.getElementById("player").player;e&&("seconds"==t.type?e.updatePause(i):e.updateRepeatCount(i-1))}}resetPlayButton(){document.querySelector("#playing-part").children[0].classList="icon-play1",document.querySelector("#playing-part").children[1].innerText="Play"}handlePlayerButton(e){const t=e.target;if("false"==t.dataset.disabled){let e=this.getPlayer();"icon-pause"==t.classList?(this.setPlayerCtrls("play"),e.pauseCurrent()):(this.setPlayerCtrls("pause"),e.playCurrent())}}setPlayerCtrls(e){let t=document.querySelector("#playing-part a"),s=document.querySelector("#playing-part p");t.dataset.disabled=!1,"play"==e?(t.classList="icon-play1",s.innerHTML="Paused"):"pause"==e?(t.classList="icon-pause",s.innerHTML="Playing"):"loading"==e?(t.classList="icon-loading",s.innerHTML="Loading",t.dataset.disabled=!0):(t.classList="icon-play1",s.innerHTML="Waiting",t.dataset.disabled=!0)}get selectedWords(){return document.querySelectorAll(".word.selected")}}},function(e,t,s){"use strict";s.r(t);var n=s(1);const i="start-circle",a="end-circle";let r=".w";function o(e){e.preventDefault()}t.default=class extends n.b{connect(){this.element.segmentSelection=this,setTimeout(()=>{document.getElementById("reader").reader.isInfoMode()||this.bindSelection()},300)}bindSelection(){const e=$(this.element);this.selectedAyah=null,this.isSelecting=!1,this.startWord=null,this.startPosition=null,this.selectableWords=[],this.selections=[],this.startCircle=$("<div>").addClass(i).css({position:"absolute"}),this.endCircle=$("<div>").addClass(a).css({position:"absolute"});var t=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){t=!0}}))}catch(s){}this.wheelOpt=!!t&&{passive:!1},this.wheelEvent="onwheel"in document.createElement("div")?"wheel":"mousewheel",e.on("mousedown touchstart",e=>{let t=$(e.target);t.is(r)||t.is(".start-circle")||t.is(".end-circle")||t.is(".el-selection-dropdown")||0!=t.parents(".el-selection-dropdown").length||this.deselect()}),e.on("mousedown touchstart",".start-circle",e=>this.update(e)),e.on("mousedown touchstart",".end-circle",e=>this.update(e)),e.on("mousedown touchstart",r,e=>this.start(e)),e.on("mousemove touchmove",e=>this.mouseMoved(e)),e.on("mouseup touchend",e=>this.mouseUp(e)),e.on("click",".close-selection",e=>this.deselect(e)),$(window).on("resize",(function(){this.selectableWords&&(this.selectableWords=this.selectableWords.map(e=>(e.rect=e.el.get(0).getBoundingClientRect(),e)),positionCircles(),setSelection(),updateDropdownPositions(this.selectableWords.filter(e=>e.selected)))}))}update(e){o(e),this.disableScroll(),this.selectedAyah=$(e.target).parents(".arabic"),this.isSelecting=!0,this.selectedItems=this.selectedItems.filter(e=>e.selected);const t=this.selectedItems.last;t&&(this.startPosition={x:t.rect.x,y:t.rect.y},this.startWord=t.el)}start(e){o(e),this.deselect(),this.startWord=$(e.currentTarget),this.selectedAyah=this.startWord.closest(".arabic"),this.selectedAyah.css({position:"relative"}),this.selectedAyah.append(this.startCircle),this.selectedAyah.append(this.endCircle),this.isSelecting=!0,this.disableScroll(),this.startPosition={x:e.clientX,y:e.clientY},"touchstart"==e.type&&(this.startPosition={x:e.touches[0].clientX,y:e.touches[0].clientY}),this.buildItemsArray(),this.mouseMoved(e)}filterSelected(){this.selectedItems=this.selectableWords.filter(e=>e.selected)}disableScroll(){window.addEventListener("DOMMouseScroll",o,!1),window.addEventListener(this.wheelEvent,o,this.wheelOpt),window.addEventListener("touchmove",o,this.wheelOpt),window.addEventListener("keydown",c,!1)}enableScroll(){window.removeEventListener("DOMMouseScroll",o,!1),window.removeEventListener(this.wheelEvent,o,this.wheelOpt),window.removeEventListener("touchmove",o,this.wheelOpt),window.removeEventListener("keydown",c,!1)}buildItemsArray(){this.selectableWords=[],this.selectedAyah.find(r).each((e,t)=>{t=$(t),this.selectableWords.push({el:t,index:t.index(),rect:t.get(0).getBoundingClientRect(),selected:this.startWord.index()==t.index()})})}setSelection(){let e=this.selectableWords.filter(e=>e.selected),t={},s=0,n=this.selectedAyah.get(0).getBoundingClientRect();if(e.forEach(e=>{let i=Math.round(e.rect.y-n.y),a=Math.round(e.rect.x-n.x),r=Math.round(e.rect.x-n.x+e.rect.width),o=Math.round(e.rect.y-n.y+e.rect.height);t[i]?t[i]={top:i,left:Math.min(t[i].left,a),right:Math.max(t[i].right,r),bottom:Math.max(t[i].bottom,o)}:(s++,t[i]={top:i,left:a,right:r,bottom:o})}),s>this.selections.length)for(var i=this.selections.length-1;i<s;i++){let e=$("<div>").addClass("selection");this.selectedAyah.append(e),this.selections.push(e)}else s<this.selections.length&&this.selections.splice(s).map(e=>e.remove());Object.values(t).map((e,t)=>{this.selections[t].css({top:e.top,left:e.left,width:e.right-e.left,height:e.bottom-e.top})})}positionCircles(){if(!this.selectedAyah)return;let e=this.selectedAyah.get(0).getBoundingClientRect(),t=this.selectableWords.filter(e=>e.selected);if(0==t.length)return;let s=t[0],n=t[t.length-1];const i=s.rect.x-e.x+s.rect.width,a=n.rect.x-e.x;this.startCircle.css({top:s.rect.y-e.y,left:i,height:s.rect.height}),this.endCircle.css({top:n.rect.y-e.y,left:a,height:n.rect.height})}updateDropdownPositions(){const e=document.documentElement,t=$(window).scrollTop(),s=this.selectedItems[this.selectedItems.length-1];s&&(e.style.setProperty("--el-selection-y",s.rect.y+t+50+"px"),e.style.setProperty("--el-selection-x",s.rect.x+"px"))}deselect(e){e&&(e.preventDefault(),e.stopImmediatePropagation()),this.selectableWords.forEach(e=>{e.selected=!1,e.el.removeClass("selected")}),this.selectableWords=[],this.selectedAyah=null,this.startWord=null,this.startPosition=null,this.startCircle.remove(),this.endCircle.remove(),this.selections.splice(0).map(e=>e.remove()),$(document).trigger("segment:removed")}mouseUp(e){this.isSelecting&&(this.isSelecting=!1,this.filterSelected(),this.updateDropdownPositions(),this.positionCircles(),$(document).trigger("segment:selected",[this.selectedItems.map(e=>e.el)]),this.enableScroll())}mouseMoved(e){if(this.isSelecting){let t={x:e.clientX,y:e.clientY};"touchmove"==e.type&&(t={x:e.touches[0].clientX,y:e.touches[0].clientY}),this.selectableWords.forEach(e=>{let s=e.el.index()<=this.startWord.index()&&(e.rect.x<t.x&&e.rect.y+e.rect.height>t.y||e.rect.y>t.y),n=e.el.index()>=this.startWord.index()&&(e.rect.x+e.rect.width>t.x&&e.rect.y<t.y||e.rect.y+e.rect.height<t.y);e.selected=n||s,e.selected?e.el.addClass("selected"):e.el.removeClass("selected")}),this.positionCircles(),this.setSelection()}}};const l={37:1,38:1,39:1,40:1};function c(e){if(l[e.keyCode])return o(e),!1}},function(e,t,s){"use strict";s.r(t);var n=s(1);t.default=class extends n.b{connect(){const e={width:550,height:600,location:"no",toolbar:"no",status:"no",directories:"no",menubar:"no",scrollbars:"yes",resizable:"no",centerscreen:"yes",left:window.outerWidth/2+(window.screenX||window.screenLeft||0)-275,top:window.outerHeight/2+(window.screenY||window.screenTop||0)-200};this.shareWindowConfig=Object.keys(e).map(t=>`${t}=${e[t]}`).join(", ");let t=$(this.element);this.shareButtons=t.find("#share-buttons"),this.url=t.data("url"),this.text=t.data("text"),this.title=t.data("title"),this.addButton("facebook","Facebook",{href:"https://www.facebook.com/sharer/sharer.php?u="+this.url}),this.addButton("twitter","Twitter",{href:`https://twitter.com/share?url=${this.url}&hashtags=quran&via=app_quran`}),this.addButton("messenger","Messenger",{href:"https://www.facebook.com/dialog/send?link="+this.url});let s=this.isMobileOrTablet()?"api":"web";this.addButton("whatsapp","Whatsapp",{"data-share":`'https://${s}.whatsapp.com/send?text=${this.url} ${this.title} ${this.text}'`,href:`https://${s}.whatsapp.com/send?text="${this.title} ${this.url} ${this.text}"`}),this.addButton("pinterest","Pinterest",{href:`https://pinterest.com/pin/create/button/?url=${this.url}&description=${this.title+" "+this.text}`}),this.addButton("telegram","Telegram",{href:`https://telegram.me/share/?url=${this.url}&text=${this.text}`}),this.addButton("reddit","Reddit",{href:`https://www.reddit.com/submit?url=${this.url}&title=${this.title}`}),this.addButton("pocket","Pocket",{href:`https://getpocket.com/save?url=${this.url}&title=${this.title}`}),this.addButton("envelope","Email",{href:`mailto:&subject=${this.title}&body=${this.url+" "+this.text}`}),this.addButton("line","Line",{"data-share":`https://social-plugins.line.me/lineit/share?url=${this.url}&text=${this.text}`,href:`https://social-plugins.line.me/lineit/share?url=${this.url}&text=${this.text}`}),t.find(".share-icon a").on("click",e=>{this.share(e.target)}),this.el=t}isMobileOrTablet(){return/(android|iphone|ipad|mobile)/i.test(navigator.userAgent)}addButton(e,t,s){let n=`<div class='col-4 col-md-3 text-center'>\n                  <span class='share-icon ${e}'>\n                   <a target='_blank' rel='noopener'\n                   title='Share on ${t}'\n                   ${Object.keys(s).map(e=>`${e}=${s[e]}`).join(", ")}>\n                   <i class='quran-icon icon-${e}'></i></a>\n                   </span><p class='text-muted fs-sm'>${t}</p></div>`;this.shareButtons.append(n)}share(e){$(e);GoogleAnalytic.trackEvent("Share","Verse",this.el.data("versekKey"),1)}disconnect(){}}},function(e,t,s){"use strict";s.r(t);var n=s(1);t.default=class extends n.b{connect(){this.element.addEventListener("click",e=>this.toggle(e))}toggle(e){e.preventDefault(),e.stopImmediatePropagation();const{target:t,close:s,isChild:n}=this.element.dataset;"true"==n&&document.getElementById("main-right-sidebar").classList.toggle("d-none");const i=document.querySelector(t);i.classList.toggle("hidden");i.classList.toggle("open")?document.querySelectorAll(s).forEach(e=>{e.addEventListener("click",e=>this.toggle(e))}):document.querySelectorAll(s).forEach(e=>{e.removeEventListener("click",()=>{})})}}},function(e,t,s){"use strict";s.r(t);var n=s(1);t.default=class extends n.b{connect(){this.element.loader=this,this.el=$(this.element),this.el.append("<div id='loading-spinner' class='spinner p-3 d-none'><i class='spinner--swirl'></i></div>")}show(){$("#loading-spinner").removeClass("d-none")}hide(){$("#loading-spinner").addClass("d-none")}}},function(e,t,s){"use strict";s.r(t);var n=s(1);const i="tabs__item--selected";t.default=class extends n.b{connect(){this.element.querySelectorAll(".tabs__item").forEach(e=>{e.addEventListener("click",e=>this.changeTab(e))})}disconnect(){}changeTab(e){e.preventDefault();const t=e.currentTarget;if(t.classList.contains(i))return;const{target:s,tab:n}=t.dataset;this.hideTabs(n),this.showTab(s)}showTab(e){document.querySelectorAll(".tabs__item[data-target='"+e).forEach(e=>{e.classList.add(i),this.fireEvent("tab.shown",e)});document.querySelectorAll(e).forEach(e=>{e.classList.remove("hidden"),e.classList.add("show","active")})}hideTabs(e){document.querySelectorAll(`[data-tab=${e}]`).forEach(e=>{e.classList.remove(i),this.fireEvent("tab.hidden",e)}),document.querySelectorAll(`[data-tab-group=${e}]`).forEach(e=>{e.classList.add("hidden"),e.classList.remove("show","active")})}fireEvent(e,t){let s;"function"===typeof Event?s=new Event(e):(s=document.createEvent("Event"),s.initEvent(e,!0,!0)),(t||document).dispatchEvent(s)}}},function(e,t,s){"use strict";s.r(t);var n=s(1);t.default=class extends n.b{constructor(...e){super(...e),this.selectedLang=""}connect(){$("#tafsir-list a").on("click",()=>{window.dialog&&(window.dialog.hide(),window.dialog.dispose(),window.dialog=null)})}filter(e){const t=e.currentTarget.dataset.selectedLang;t===this.selectedLang?this.selectedLang="":this.selectedLang=t,this.applyFilter()}applyFilter(){document.getElementById("filters").querySelectorAll("button").forEach(e=>{e.dataset.selectedLang===this.selectedLang?(e.classList.remove("btn-outline-secondary"),e.classList.add("btn-secondary")):(e.classList.remove("btn-secondary"),e.classList.add("btn-outline-secondary"))}),document.getElementById("tafsir-list").querySelectorAll("li").forEach(e=>{e.hidden=this.selectedLang&&e.dataset.lang!==this.selectedLang})}}},function(e,t,s){"use strict";s.r(t);var n=s(4);t.default=class extends n.default{connect(){super.connect(),this.logDevMessage(),this.themeButtons=$(this.element).find("a"),this.themeButtons.on("click",e=>{e.preventDefault(),e.stopImmediatePropagation();e.currentTarget.classList.contains("active")||(this.themeButtons.removeClass("active"),e.currentTarget.classList.add("active"),this.toggle())}),this.updatePage()}logDevMessage(){try{console.log("%c \ufdfd\n\n %s","background: #00acc2; color: #fff; padding: 2px; border-radius:2px","Salam, found any bug? Please report it here https://github.com/quran/quran.com-frontend-v2/issues")}catch(e){}}disconnect(){}setTheme(e){this.themeButtons.removeClass("active"),$(`[data-theme='${e}']`).addClass("active");let t=document.body.classList;t.remove("dark"),t.add(e)}updatePage(){const e=this.get("nightMode"),t=window.matchMedia("(prefers-color-scheme: dark)"),s=t=>{t&&t.matches&&null==e||e?this.setTheme("dark"):this.setTheme("light")};document.addEventListener("DOMContentLoaded",()=>{s(t)}),t.addListener(e=>{s(e)}),s(t)}toggle(){const e=document.body.classList.toggle("dark");this.set("nightMode",e)}}},function(e,t,s){"use strict";s.r(t);var n=s(1);t.default=class extends n.b{connect(){this.element.addEventListener("click",e=>this.trackActions(e))}disconnect(){}trackActions(e){const{name:t,category:s,action:n,value:i}=e.target.dataset;GoogleAnalytic.trackEvent(t,s,n||"Clicked",i)}}},function(e,t,s){"use strict";s.r(t);var n=s(1),i=s(5),a={sg:"Singular",pl:"Plural",dl:"<b>Dual</b> <br/> A form for verbs and pronouns in Arabic language when addressing two people"};t.default=class extends n.b{connect(){this.bindFootnotes()}bindFootnotes(){let e=$(this.element),t=e.find("sup");t.click(t=>{t.preventDefault(),t.stopImmediatePropagation();var s=t.target.getAttribute("foot_note");if(s&&s.length>0){let t=e.find("#footnote-"+s);if(t.length>0)return t.toggleClass("d-none");fetch(`/foot_note/${s}?resource_content_id=${this.element.dataset.resourceContentId}`,{headers:{"X-Requested-With":"XMLHttpRequest"}}).then(e=>e.text()).then(t=>{e.find("#footnotes").html(t)})}}),t.each((e,t)=>{let s=t.innerText.replace(" ","");a[s]&&new i.a(t,{title:a[s],html:!0,direction:"top",sanitize:!1})})}disconnect(){}}},function(e,t,s){"use strict";s.r(t),s.d(t,"default",(function(){return u}));var n=s(1),i=s(13),a=s.n(i),r=s(5),o=s(9),l=s(10),c=s(7);const d={ham_wasl:"Hamzat ul Wasl",slnt:"Silent",laam_shamsiyah:"Lam Shamsiyyah",madda_normal:"Normal Prolongation: 2 Vowels",madda_permissible:"Permissible Prolongation: 2, 4, 6 Vowels",madda_necessary:"Necessary Prolongation: 6 Vowels",madda_obligatory:"Obligatory Prolongation: 4-5 Vowels",qalaqah:"Qalaqah",ikhafa_shafawi:"Ikhafa' Shafawi - With Meem",ikhafa:"Ikhafa'",iqlab:"Iqlab",idgham_shafawi:"Idgham Shafawi - With Meem",idgham_ghunnah:"Idgham - With Ghunnah",idgham_wo_ghunnah:"Idgham - Without Ghunnah",idgham_mutajanisayn:"Idgham - Mutajanisayn",idgham_mutaqaribayn:"Idgham - Mutaqaribayn",ghunnah:"Ghunnah: 2 Vowels"},h=["ham_wasl","slnt","laam_shamsiyah","madda_normal","madda_permissible","madda_necessary","madda_obligatory","qalaqah","ikhafa_shafawi","ikhafa","iqlab","idgham_shafawi","idgham_ghunnah","idgham_wo_ghunnah","idgham_mutajanisayn","idgham_mutaqaribayn","ghunnah"];class u extends n.b{connect(){const e=$(this.element);this.el=e,this.bindAction(e),e.find(".arabic").hasClass("tajweed")&&(this.fixTajweedForSarari(),this.bindTajweedTooltip())}disconnect(){}copy(){a()(this.copyText);const e=this.el.find(".quick-copy");let{title:t,done:s}=e.data();e.find("span").text(s),setTimeout(()=>{e.find("span").text(t)},2e3)}toggleBookmark(){let e=this.loadBookmarks();this.isBookmarked()?delete e[this.verseKey]:e[this.verseKey]=location.href,this.constructor.store.set("bookmarks",JSON.stringify(e)),this.updateBookmarkState()}updateBookmarkState(){const e=this.el.find(".bookmark");let{title:t,done:s}=e.data();this.isBookmarked()?(e.find("span").text(s),e.find("i").removeClass("icon-bookmark").addClass("icon-bookmarked")):(e.find("span").text(t),e.find("i").removeClass("icon-bookmarked").addClass("icon-bookmark"))}isBookmarked(){return!!this.loadBookmarks()[this.verseKey]}loadBookmarks(){try{return JSON.parse(this.constructor.store.get("bookmarks")||"{}")}catch(e){return{}}}togglePlay(e){let t,s=document.getElementById("player");if(s){if(t=s.player,e.find("span").hasClass("icon-play1"))return t.playVerse(this.verseKey);t.pauseCurrent()}}bindTajweedTooltip(){let e=this.element;h.forEach(t=>{e.querySelectorAll("."+t).forEach(e=>{new r.a(e,{title:d[t],html:!0,sanitize:!1,direction:"top"})})})}fixTajweedForSarari(){if((new l.a).isSafari()){const e=this.el.find(".arabic").html(),t=this.addZwj(e);this.el.find(".arabic").html(t)}}addZwj(e){return e.replace(/([\u0626\u0628\u062a-\u062e\u0633-\u063a\u0641-\u0646\u0647\u064a\u06cc])([^\u0621-\u064a\u06cc\n ]*<[^>]+>[\u064b-\u0652\u0670\u06d6\u06d7\u06da\u06db\u06dc]*)(?=[\u0622-\u064a\u06cc])/g,"$1&zwj;$2&zwj;")}bindAction(e){if(e.data("reading"))return;this.actionOpened=!1,this.actionTrigger=e.find("#open-actions"),this.actionTrigger.on("click",e=>this.toggleActions(e)),new r.a(this.element.querySelector(".qr"),{html:!0,sanitize:!1,direction:"top"}),this.element.querySelector("#close-actions").addEventListener("click",e=>{e.stopImmediatePropagation(),this.closeAction()}),e.find(".quick-copy").on("click",e=>{e.preventDefault(),this.copy()}),e.find(".bookmark").on("click",e=>{e.preventDefault(),this.toggleBookmark()});let t=e.find(".play");t.on("click",e=>{e.preventDefault(),this.togglePlay(t)})}toggleActions(e){this.actionOpened?this.closeAction():(this.updateBookmarkState(),this.openAction())}openAction(){this.onClicked=this.click.bind(this),this.el.find(".actions-wrapper").removeClass("hidden"),document.addEventListener("click",this.onClicked),setTimeout(()=>{this.actionOpened=!0},100)}closeAction(){this.actionOpened=!1,this.el.find(".actions-wrapper").addClass("hidden"),document.removeEventListener("click",this.onClicked)}click(e){const t=e.target,s=!Object(o.a)(this.element.querySelector("#ayah-actions"),t);return this.actionOpened&&s&&this.closeAction(),!0}get verseNumber(){return this.el.data("verseNumber")}get verseKey(){return this.el.data("key")}get copyText(){return this.el.data("text")}}u.store=new c.a(!0)},function(e,t,s){"use strict";s.r(t);var n=s(1),i=s(5);t.default=class extends n.b{connect(){super.connect();let e=this.element;const t=e.dataset;e.tooltip=new i.a(e,{trigger:"hover",placement:"top",html:!0,sanitize:!1,template:"<div class='tooltip bs-tooltip-top' role='tooltip'><div class='arrow'></div><div class='tooltip-inner'></div></div>",title:()=>{const e=t.local,s=document.body.setting.get("tooltip");return`<div class='${e}'>${t[s]}</div>`}}),this.bindEvents(),this.el=e}dbClick(){let e,t=document.getElementById("player");t&&(e=t.player)}disconnect(){this.el.removeEventListener("click",()=>{}),this.el.removeEventListener("dblclick",()=>{}),this.el.tooltip&&this.el.tooltip.dispose()}play(){let e,t=document.getElementById("player");if(t&&(e=t.wordPlayer),e){const{audio:t,key:s}=this.element.dataset;GoogleAnalytic.trackEvent("Play Word","Play",s,1),e.play(t)}}bindEvents(){this.element.addEventListener("dblclick",e=>{e.preventDefault(),e.stopImmediatePropagation(),this.dbClick(e)}),this.element.addEventListener("click",e=>{e.preventDefault(),e.stopImmediatePropagation(),this.play()})}}},function(e,t,s){"use strict";s.r(t);var n=s(12);t.default=class extends n.default{connect(){super.connect(),this.playWordQueue=[],this.resumeOnWordPlayEnd=!1,this.element.wordPlayer=this}play(e){let t,s=document.getElementById("player");return s&&(t=s.player),this.resumeOnWordPlayEnd=this.resumeOnWordPlayEnd||t.isPlaying(),this.loadHowler().then(()=>{let s=new Howl({src:[this.buildAudioUrl(e)],html5:!1,autoplay:!1,onload:()=>{t.isPlaying()&&t.pauseCurrent()},onplayerror:()=>{this.playWordQueue=[],this.resumeOnWordPlayEnd&&t.playCurrent(),this.resumeOnWordPlayEnd=!1},onend:()=>{this.playWordQueue.shift(),this.playWordQueue[0]?this.playWordQueue[0].play():(this.resumeOnWordPlayEnd&&t.playCurrent(),this.resumeOnWordPlayEnd=!1)}});this.playWordQueue.push(s),1==this.playWordQueue.length&&s.play()})}}},function(e,t,s){},,function(e,t,s){"use strict";s.r(t);var n=s(1);class i{constructor(e,t){const s={debug:!1,navSelector:"a[rel=next]",buffer:1e3,debounce:250,loading:null,success:null,error:null,context:window,id:"",state:{paused:!1,loading:!1}};this.scrollTimeout=null,this.options=$.extend({},s,t),this.$container=e,this.$context=$(this.options.context),this.options.id=Math.random().toString(36).substring(2,10),this.pageScrollHandler=null,this.init()}init(){return this._log("Init scrolling"),this.pageScrollHandler=this._scrolled.bind(this),this.$context[0].addEventListener("scroll",this.pageScrollHandler)}_scrolled(){const{debounce:e}=this.options;return this.scrollTimeout&&(clearTimeout(this.scrollTimeout),this.scrollTimeout=null),this.scrollTimeout=setTimeout(()=>this.check(),e)}_log(e){if(this.options.debug){const{id:t}=this.options;return"undefined"!==typeof console&&null!==console?console.log(e,this.$container.attr("id"),t):void 0}}check(){const e=this.$container.find(this.options.navSelector);if(0===e.length)return this._log("No more pages to load");{const t=this.$context.scrollTop()+this.$context.height(),s=e.offset().top-t;return this.options.state.paused?this._log("Paused"):this.options.state.loading?this._log("Waiting..."):s>this.options.buffer?this._log(s-this.options.buffer+"px remaining..."):this.next()}}next(){if(this.options.state.done)return this._log("Loaded all pages");{this._loading();const e=this.$container.find(this.options.navSelector).attr("href");return fetch(e,{headers:{"X-Requested-With":"XMLHttpRequest"}}).then(e=>e.text()).then(e=>this._success(e)).catch(e=>this._error(e))}}_loading(){if(this.options.state.loading=!0,this._log("Loading next page..."),"function"===typeof this.options.loading)return this.$container.find(this.options.navSelector).each(this.options.loading)}_success(e){this.options.state.loading=!1,this._log("New page loaded!"),"function"===typeof this.options.success&&this.options.success(e)}_error(){if(this.options.state.loading=!1,this._log("Error loading new page :("),"function"===typeof this.options.error)return this.$container.find(this.options.navSelector).each(this.options.error)}pause(){return this.options.state.paused=!0,this._log("Scroll checks paused")}resume(){return this.options.state.paused=!1,this._log("Scroll checks resumed"),this.check()}stop(){return this.scrollTimeout&&clearTimeout(this.scrollTimeout),this.$context[0].removeEventListener("scroll",this.pageScrollHandler),this._log("Scroll checks stopped")}destroy(){this.stop()}}t.default=class extends n.b{connect(){let e=$(this.element);var t=e.attr("id"),s=e.data("context");s=s?$(s):window;const n=$(e.data("items-container")||"#"+t),a=new i(n,{debug:!1,buffer:1e3,navSelector:`#${t}_pagination a[rel=next]:first`,context:s,loading(){},success(e){$(`#${t}_pagination`).remove();const s=$(e);n.append(s),n.trigger("items:added")},error:e=>n.find(".pagination").before(e)});n.is(":hidden")&&a.pause(),n.on("visibility:visible",()=>{a.resume()}),n.on("visibility:hidden",()=>{a.pause()}),this.element.infinitePage=a,this.plugin=a}disconnect(){this.plugin&&this.plugin.stop()}}},function(e,t,s){"use strict";s.r(t);var n=s(1);var i=class{loadAsyncContent(e){var t,s,n,i,a=document.querySelector(e),r=a.dataset,o=r.path,l=r.method||"GET",c=parseFloat(r.interval||0),d=r.successEvent,h=r.errorEvent,u=r.retryEvent,p=parseInt(r.retryCount||0),g=r.errorMessage||"",m=parseInt(0|r.delayOnError),y=r.lazyLoad;y&&(y=JSON.parse(y),t=(y=1==y?{}:y).threshold||[.25,.5,.75,1],s=y.root,n=y.margin||"0px",s=s?document.querySelector(s):null);var f=function(e){var t;e&&e.length>0&&("function"===typeof Event?t=new Event(e):(t=document.createEvent("Event")).initEvent(e,!0,!0),document.dispatchEvent(t))},v=function(e){y&&function(e){e.dataset.lazyLoaded=!0,i&&i.unobserve(e),i=null}(a),a.classList.remove("render-async"),c?$(a).empty().append(e):$(a).replaceWith(e),d&&f(d)},b=function(e,t){e.ok?e.text().then(v):function(e){e>p?setTimeout(m,(function(){S(e)})):a.innerHTML=g,f(h)}(t)},w=function(e){var t={"X-Requested-With":"XMLHttpRequest"},s=document.querySelector('meta[name="csrf-token"]');s&&(t["X-CSRF-Token"]=s.content);var n={method:l,headers:t};"POST"==l&&(n.body=JSON.stringify(r)),fetch(o,n).then(t=>b(t,e))};c>0&&(p=0,setInterval(w,c));var k;if(p>0)var S=function(e){return!(e>=p)&&(f(u),w(e+1),!0)};y?(k=1,(i=new IntersectionObserver((function(e){e[0].intersectionRatio>0&&(function(e){return"true"===e.dataset.lazyLoaded}(a)||w(k))}),{root:s,rootMargin:n,threshold:t})).observe(a)):w(1)}};t.default=class extends n.b{connect(){(new i).loadAsyncContent("#"+this.element.getAttribute("id"))}}}],[[25,1,4]]]);